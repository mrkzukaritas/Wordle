{% extends "base.html" %}
{% load static %}
{% block content %}

<style>
@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

body {
  font-family: 'Press Start 2P', cursive;
  background-color: #c8d1a1;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  margin: 0;
}

.game-container {
  text-align: center;
  padding: 20px;
  border: 3px solid #ff00c7;
  border-radius: 10px;
  background-color: #d0d8ae;
  width: 330px;
}

h1 {
  color: #ff00a8;
  font-size: 16px;
  margin-bottom: 15px;
}

.board {
  display: grid;
  grid-template-columns: repeat(5, 50px);
  gap: 5px;
  justify-content: center;
  margin-bottom: 20px;
}

.cell {
  width: 50px;
  height: 50px;
  border: 2px solid #ff00a8;
  font-size: 18px;
  font-weight: bold;
  text-transform: uppercase;
  text-align: center;
  line-height: 50px;
  background-color: white;
}

.correct { background-color: #008316; color:white; }
.present { background-color: #ffc300; color:white; }
.absent  { background-color: #858585; color:white; }

input[type="text"] {
  padding: 8px;
  font-size: 14px;
  width: 160px;
  text-transform: uppercase;
  font-family: 'Press Start 2P', cursive;
}

button {
  padding: 8px 12px;
  background-color: #ff00a8;
  color: white;
  border: none;
  cursor: pointer;
  margin-top: 10px;
  font-family: 'Press Start 2P', cursive;
  font-size: 12px;
}

.message {
  margin-top: 10px;
  font-weight: bold;
  color: #333;
  font-size: 12px;
}
</style>

<div class="game-container">

    <h1>SAC Wordle</h1>

    <div class="board">
        {% for hi in game.historial %}
            
            {# SI hi ES UNA LISTA DE LISTAS  #}
            {% if hi.0.1 is not None %}
                {% for letra, estado in hi %}
                    <div class="
                        cell
                        {% if estado == 2 %}correct{% endif %}
                        {% if estado == 1 %}present{% endif %}
                        {% if estado == 0 %}absent{% endif %}
                    ">
                        {{ letra }}
                    </div>
                {% endfor %}

            {# SI hi ES SOLO EL STRING DE LA PALABRA #}
            {% else %}
                {% for letra in hi %}
                    <div class="cell">{{ letra }}</div>
                {% endfor %}
            {% endif %}

        {% endfor %}
    </div>

    <div class="message">
        Intentos: {{ game.attempts }} / {{ game.max_attempts }}
    </div>

    {% if game.is_won %}
        <div class="message">Â¡Ganaste! ðŸŽ‰</div>

    {% elif game.attempts >= game.max_attempts %}
        <div class="message">Perdiste ðŸ˜¢<br>Palabra: {{ game.word_to_guess }}</div>

    {% else %}
        <form action="" method="post">
            {% csrf_token %}
            <input type="text" maxlength="5" name="your_name" placeholder="PALABRA">
            <button type="submit">PROBAR</button>
        </form>
    {% endif %}

</div>

{% endblock %}
